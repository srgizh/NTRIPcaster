# Отчёт о поэтапном тестировании NTRIP Caster
## Обзор тестирования

**Время тестирования**: 4 августа 2025 года 11:03 - 11:27  
**Продолжительность тестирования**: приблизительно 24 минуты 41 секунда  
**Тестовая среда**: Система Windows, сервер 2RTK NTRIP Caster  
**Цель тестирования**: Проверка производительности и стабильности системы при различных нагрузках  

## Конфигурация системы

- **Максимальное количество подключений**: 2000
- **Точки монтирования**: 2 (RTKHL, RTKGL)
- **Системные ресурсы**: AMD 5600 6 ядер 12 потоков 31.9GB общей памяти
- **Интервал мониторинга**: 10 секунд

## Подробный анализ этапов тестирования

### Этап 1: Начальное базовое состояние (0-4 минуты)

**Производительность системы**:
- Активные подключения: 2/2000 (базовые подключения точек монтирования)
- Использование CPU: 1.0% - 7.0%
- Использование памяти: 28.3% - 29.5% (приблизительно 9.0-9.4GB)
- Сетевая пропускная способность: 0.08-0.83 Mbps
- Передача данных: 0.48-1.58 MB

**Состояние точек монтирования**:
- RTKHL: Стабильная работа, непрерывный рост количества пакетов данных
- RTKGL: Стабильная работа, непрерывный рост количества пакетов данных
- Обе точки монтирования поддерживают состояние "validated"

### Этап 2: Первый раунд тестирования нагрузки 500 подключений (4-6 минут)

**Начало тестирования**: Время работы 4 минуты 47 секунд - обнаружен резкий рост количества подключений

**Пиковая производительность**:
- Активные подключения: 502/2000
- Использование CPU: 4.6% - 18.1%
- Использование памяти: 28.7% - 29.5%
- Сетевая пропускная способность: пик 7.47 Mbps
- Передача данных: 1.58-2.08 MB

**Ключевые наблюдения**:
- Система успешно обработала 500 одновременных подключений
- Появились периодические ошибки "Не удалось получить системную статистику"
- Подключения в основном сконцентрированы на точке монтирования RTKGL
- После окончания теста количество подключений быстро снизилось до 139

### Этап 3: Первый период восстановления (6-14 минут)

**Восстановление системы**:
- Активные подключения: Постепенно снизились до 2/2000 (базовое состояние)
- Использование CPU: 1.0% - 22.2%
- Использование памяти: 28.6% - 29.9%
- Сетевая пропускная способность: 0.07-8.33 Mbps (наблюдались кратковременные пики)
- Передача данных: 2.08-3.91 MB

**Активность WebSocket-подключений**:
- Обнаружены подключения и отключения WebSocket-клиентов веб-интерфейса
- Активность подключений показывает, что интерфейс мониторинга работает нормально

### Этап 4: Второй раунд тестирования нагрузки 500 подключений (14-17 минут)

**Возобновление тестирования**: Время работы 14 минут 8 секунд - обнаружен новый раунд тестирования 500 подключений

**Производительность**:
- Активные подключения: 502/2000
- Общее количество подключений: 1002 (накопленное)
- Использование CPU: 1.4% - 16.4%
- Использование памяти: 28.4% - 30.0%
- Сетевая пропускная способность: пик 12.32 Mbps
- Передача данных: 3.91-4.73 MB

**Распределение подключений**:
- RTKHL: 233 пользователя
- RTKGL: 267 пользователей
- Распределение подключений относительно равномерное

### Этап 5: Крупномасштабное тестирование 1000 подключений (19-20 минут)

**Тестирование высокой нагрузки**: Время работы 19 минут 28 секунд - начало тестирования 1000 подключений

**Пиковая производительность**:
- Активные подключения: 1002/2000
- Общее количество подключений: 2002 (накопленное)
- Пользовательские подключения: 1000
- Использование CPU: 6.6% - 29.3%
- Использование памяти: 28.8% - 29.0%
- Сетевая пропускная способность: 7.22-8.14 Mbps
- Передача данных: 5.23-5.50 MB

**Распределение подключений**:
- RTKHL: 522 пользователя
- RTKGL: 478 пользователей
- Распределение нагрузки относительно равномерное

### Этап 6: Промежуточный период восстановления (20-23 минуты)

**Восстановление системы**:
- Активные подключения: Восстановлены до 2/2000
- Использование CPU: 2.1% - 17.1%
- Использование памяти: 28.4% - 29.6%
- Сетевая пропускная способность: 0.08-0.46 Mbps
- Передача данных: 5.50-5.68 MB

### Этап 7: Предельное тестирование 2000 подключений (23-24 минуты)

**Беспрецедентное предельное тестирование**: Время работы 23 минуты - начало предельного тестирования 2000 подключений

**Предельная производительность**:
- Активные подключения: 2000/2000 (достигнут верхний предел проектной системы)
- Общее количество подключений: 4000 (накопленное)
- Пользовательские подключения: 2000
- Использование CPU: 2.6% - 17.3%
- Использование памяти: 30.2% - 30.3%
- Сетевая пропускная способность: 7.23-7.69 Mbps
- Передача данных: 6.20-6.50 MB

**Распределение подключений**:
- RTKHL: 969 пользователей
- RTKGL: 1029 пользователей
- Распределение нагрузки близко к идеальному балансу

### Этап 8: Финальный период восстановления (24-25 минут)

**Восстановление системы**:
- Активные подключения: Восстановлены до 2/2000
- Использование CPU: 1.5% - 8.2%
- Использование памяти: 28.5% - 29.8%
- Сетевая пропускная способность: 0.08-0.35 Mbps
- Передача данных: 6.50-6.68 MB


### Использование системных ресурсов
-  **Отличная производительность CPU**: При предельной нагрузке 2000 подключений использование CPU составляет всего 17.3%
-  **Стабильная память**: Пиковое использование памяти 30.3%, признаков утечки нет
-  **Мощная сеть**: При 2000 подключениях поддерживается стабильная передача 7.69 Mbps
-  **Отличная масштабируемость**: От 500 до 2000 подключений производительность масштабируется линейно

### Показатели стабильности
-  **Проблемы мониторинга**: При высокой нагрузке появляются ошибки "Не удалось получить системную статистику"
-  **Стабильность службы**: Обе точки монтирования постоянно поддерживают состояние validated
-  **Целостность данных**: Счетчик пакетов данных продолжает расти, признаков потери нет
-  **Многократное тестирование**: Успешно завершено несколько раундов тестирования нагрузки различного масштаба


### Обнаруженные проблемы
1. **Ошибка получения статистики**: При высокой нагрузке появляются периодические ошибки "Не удалось получить системную статистику"
2. **Колебания CPU**: При тестировании 1000 подключений использование CPU колебалось значительно (6.6%-29.3%)
3. **Влияние мониторинга**: Получение статистической информации может оказывать небольшое влияние на производительность системы при высокой нагрузке

## Выводы тестирования

**Тестирование пройдено успешно**

Система NTRIP Caster в тестировании показала:

1. **Обработка предельной одновременной нагрузки**: Успешно обработано 2000 одновременных подключений, достигнут верхний предел проектной системы
2. **Отличная эффективность использования ресурсов**: При предельной нагрузке CPU составляет всего 17.3%, пиковое использование памяти 30.3%
3. **Мощная сетевая производительность**: При 2000 подключениях поддерживается стабильная передача 7.69 Mbps
4. **Сверхбыстрое восстановление**: От предельной нагрузки система быстро восстанавливается до базового состояния
5. **Сверхстабильность службы**: Службы точек монтирования стабильны даже под предельным давлением
6. **Идеальная масштабируемость**: Линейное масштабирование от 500 до 2000 подключений

---

**Время создания отчёта**: 4 августа 2025 года  
**Выполнение тестирования**: Автоматизированная система мониторинга  
**Источник данных**: Логи NTRIP Caster в реальном времени  
**Масштаб тестирования**: Предельные 2000 одновременных подключений, накоплено 4000 подключений  
