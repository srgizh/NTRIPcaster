# Отчёт о предельном тестировании NTRIP Caster на 2000 подключений

## Обзор тестирования

**Время тестирования**: 4 августа 2025 года 11:38:07 - 11:46:56  
**Продолжительность тестирования**: приблизительно 8 минут 49 секунд  
**Тип тестирования**: Предельное тестирование нагрузки 2000 одновременных подключений  
**Конфигурация системы**: Максимальное количество подключений 5000, размер пула потоков 5000  
AMD 5600 6 ядер 12 потоков 31.9GB общей памяти
## Тестовая среда

- **Адрес сервера**: 192.168.1.4
- **Порт NTRIP**: 2101
- **Порт веб-управления**: 5757
- **Точки монтирования**: RTKGL, RTKHL
- **Системная память**: 31.9GB
- **Конфигурация максимального количества подключений**: 5000
- **Конфигурация пула потоков**: 5000


### Производительность подключений
- **Пик одновременных подключений**: 2002/5000 (превышена цель 2000 подключений)
- **Общее количество подключений**: 3003
- **Отклонённые подключения**: 0
- **Успешность подключений**: 100%

### Использование системных ресурсов
- **Пиковое использование CPU**: 32.0%
- **Пиковое использование памяти**: 33.6% (10.7GB / 31.9GB)
- **Использование CPU в стабильный период**: 2.5-6.0%
- **Использование CPU в период восстановления**: 8.4-11.1%
- **Базовое использование памяти**: 32.9-33.0% (10.5GB / 31.9GB)

### Сетевая производительность
- **Пиковая сетевая пропускная способность**: 18.06 Mbps (исходящий 17.64 Mbps, входящий 0.42 Mbps)
- **Сетевая пропускная способность в стабильный период**: 6.33-9.50 Mbps
- **Сетевая пропускная способность в период восстановления**: 4.98-5.35 Mbps
- **Общий объём переданных данных**: 1.87 MB

### Состояние точек монтирования
- **RTKGL**: Пик 1010 пользователей, финально 37 пользователей, 4972 пакета данных, состояние validated
- **RTKHL**: Пик 990 пользователей, финально 50 пользователей, 1253 пакета данных, состояние validated

### Первый этап: Запуск системы (0-30 секунд)
- Система успешно запущена, все службы работают нормально
- Пул потоков и очередь подключений правильно настроены на 5000
- Точки монтирования RTKGL и RTKHL начали принимать данные
- Начальное состояние: 2 активных подключения, CPU 6.0%, память 32.3%

### Второй этап: Первый период установления подключений (30 секунд-2 минуты 46 секунд)
- Быстрое установление 1000 клиентских подключений
- Успешность подключений 100%
- Нагрузка на систему постепенно увеличивается, но остаётся стабильной
- Точка монтирования RTKHL завершила парсинг RTCM, сгенерирована полная таблица STR

### Третий этап: Первый период пиковой нагрузки (2 минуты 46 секунд-3 минуты 19 секунд)
- **Активные подключения**: 1002/5000
- **Пользовательские подключения**: 1000
- **Использование CPU**: 9.6%
- **Использование памяти**: 33.1%
- **Сетевая пропускная способность**: 10.79 Mbps
- Система работает стабильно при высокой нагрузке, потери подключений нет

### Четвёртый этап: Первый период отключений (3 минуты 19 секунд-3 минуты 52 секунды)
- Первые 1000 подключений быстро отключились
- Система снизила количество подключений с 1000 до 0
- Процесс отключения проходит плавно, без аномальных ошибок
- Система быстро восстановилась до базового состояния

### Пятый этап: Второй период установления подключений (3 минуты 52 секунды-5 минут 42 секунды)
- Начался второй раунд тестирования 2000 подключений
- Количество подключений быстро возросло до 1931
- Использование системных ресурсов постепенно увеличивается

### Шестой этап: Период пиковой нагрузки 2000 подключений (5 минут 42 секунды-6 минут 26 секунд)
- **Активные подключения**: 2002/5000
- **Пользовательские подключения**: 2000
- **Использование CPU**: 2.5-6.0%
- **Использование памяти**: 32.8-33.6%
- **Сетевая пропускная способность**: 6.33-9.50 Mbps
- Система работает исключительно стабильно при 2000 подключениях
- Балансировка нагрузки: RTKGL 1010 пользователей, RTKHL 990 пользователей

### Седьмой этап: Период динамической корректировки подключений (6 минут 26 секунд-7 минут 21 секунда)
- Система обрабатывает большое количество новых запросов на подключение
- Количество подключений сохраняется на уровне 2002 активных подключений
- Распределение пользователей изменяется, но общее количество остаётся стабильным

### Восьмой этап: Период массового отключения (7 минут 21 секунда-7 минут 54 секунды)
- Массовое начало отключений
- Пользовательские подключения снизились с 2000 до 891
- **Использование CPU**: 21.5-28.1% (обработка запросов на отключение)
- **Сетевая пропускная способность**: 9.93-18.06 Mbps (пиковая обработка)
- Система остаётся стабильной при высокой нагрузке в процессе отключения

### Девятый этап: Период быстрого восстановления (7 минут 54 секунды-8 минут 5 секунд)
- Количество подключений быстро снизилось до 87 пользователей
- Активные подключения снизились до 494
- **Использование CPU**: С 32.0% снизилось до 8.4%
- Система быстро восстановилась до стабильного состояния

### Десятый этап: Финальный стабильный период (8 минут 5 секунд-8 минут 49 секунд)
- **Активные подключения**: 494/5000
- **Пользовательские подключения**: 87
- **Использование CPU**: 10.5-11.1%
- **Использование памяти**: 32.9-33.0%
- **Сетевая пропускная способность**: 4.98-5.35 Mbps
- Система полностью восстановилась до стабильного рабочего состояния

## Технические характеристики

### Отличные показатели
1. **Сверхвысокая способность обработки одновременной нагрузки**: Успешно обработано 2000 одновременных подключений, успешность подключений 100%
2. **Предельно высокая эффективность использования ресурсов**: Пиковое использование CPU составляет всего 32.0%, в стабильный период при 2000 подключениях всего 2.5-6.0%
3. **Превосходная сетевая производительность**: Пиковая пропускная способность 18.06 Mbps, передача данных стабильна и надёжна
4. **Отличная балансировка нагрузки**: Точки монтирования RTKGL и RTKHL распределяют нагрузку равномерно (1010:990)
5. **Способность быстрого восстановления**: После массового отключения система немедленно восстановилась до стабильного состояния
6. **Нулевой отказ подключений**: В тестировании 2000 подключений не было ни одного отклонённого подключения

### Стабильность системы
1. **Предельно высокая надёжность**: Обработано 3003 общих подключений, нулевой процент отказов
2. **Обработка динамической нагрузки**: Способность обрабатывать быстрое установление и отключение подключений
3. **Отличное управление памятью**: Использование памяти стабильно, утечки памяти нет
4. **Целостность данных**: Передача данных всех точек монтирования нормальная, парсинг RTCM завершён
5. **Стабильность на разных этапах**: Стабильная работа как на этапе 1000, так и на этапе 2000 подключений

### Анализ сравнения производительности

#### Сравнение 1000 подключений vs 2000 подключений
| Показатель | Тестирование 1000 подключений | Тестирование 2000 подключений | Прирост |
|------|-------------|-------------|----------|
| Пик подключений | 1002 | 2002 | +100% |
| Пиковое использование CPU | 19.1% | 32.0% | +67.5% |
| Пиковое использование памяти | 33.9% | 33.6% | -0.9% |
| Пиковая сетевая пропускная способность | 10.79 Mbps | 18.06 Mbps | +67.3% |
| Успешность подключений | 99.9% | 100% | +0.1% |

**Вывод**: Производительность системы при 2000 подключениях превосходит тестирование 1000 подключений, использование ресурсов более эффективно.



**Время завершения тестирования**: 4 августа 2025 года 11:47:00  
**Создание отчёта**: Автоматизированная система мониторинга тестирования  
